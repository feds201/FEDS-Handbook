(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5698],{9712:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Chatbot2",function(){return s(9969)}])},9969:function(e,t,s){"use strict";s.r(t);var r=s(5893),a=s(7294),n=s(6490),l=s(5386),i=s.n(l);let{GoogleGenerativeAI:o}=s(7861),d=(0,n.eI)("https://sogtilovtzrqqcjzqosn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvZ3RpbG92dHpycXFjanpxb3NuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE4MDg1MDUsImV4cCI6MjA0NzM4NDUwNX0.tzdQTILk8CvU9jtSGB2jzHuNyFHVcd3rKXSMc7XDuSM");t.default=()=>{let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[w,y]=(0,a.useState)(!1),N=new o("AIzaSyBqdVyA6jl-IOIeXHP_1W4Vb5A38iPU4t4").getGenerativeModel({model:"gemini-1.5-flash"});(0,a.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await d.from("faqs").select("*");if(t)throw t;c(e||[])}catch(e){console.error("Error fetching FAQs:",e.message)}})()},[]);let v=async()=>{if(e.trim()){n(t=>[...t,{sender:"user",text:e}]),y(!0);try{let t=j(e);if(t)n(e=>[...e,{sender:"bot",text:t.answer}]);else{let t=await N.generateContent({text:e}),s=(await t.response).text;n(e=>[...e,{sender:"bot",text:s}])}}catch(e){console.error("Error generating response:",e),n(e=>[...e,{sender:"bot",text:"I encountered an error processing your request. Please try again."}])}finally{y(!1),t("")}}},j=e=>{if(!l.length)return null;let t=l.map(e=>e.question),{bestMatch:s}=i().findBestMatch(e.toLowerCase(),t);if(s.rating>.6){let t=l.find(e=>e.question===s.target),r=e.toLowerCase().split(" "),a=t.keywords.map(e=>e.toLowerCase());if(r.some(e=>a.some(t=>t.includes(e))))return t}return null},I=async()=>{if(!u.trim()||!h.trim()||!x.trim()||!p){alert("Please fill out all fields and agree to the terms.");return}try{let e=x.split(",").map(e=>e.trim()).filter(e=>e.length>0),{error:t}=await d.from("faqs").insert([{question:u.trim(),answer:h.trim(),keywords:e}]);if(t)throw t;alert("Question submitted successfully!"),m(""),g(""),b(""),f(!1)}catch(e){console.error("Error submitting question:",e),alert("Failed to submit question. Please try again.")}};return(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col items-center bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"h-96 p-4 overflow-y-auto bg-gray-50 space-y-4",children:[s.map((e,t)=>(0,r.jsx)("div",{className:"max-w-[70%] p-3 rounded-lg ".concat("user"===e.sender?"ml-auto bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:e.text},t)),w&&(0,r.jsx)("div",{className:"text-center text-gray-500",children:"Thinking..."})]}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 bg-white",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>"Enter"===e.key&&v(),placeholder:"Type your question...",className:"flex-1 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w}),(0,r.jsx)("button",{onClick:v,disabled:w,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:"Send"})]})})]})}),(0,r.jsx)("div",{className:"flex-1 p-4 bg-white",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-gray-50 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Submit a Question"}),(0,r.jsx)("textarea",{placeholder:"Enter your question",value:u,onChange:e=>m(e.target.value),className:"w-full h-24 p-2 mb-4 border rounded-lg resize-none"}),(0,r.jsx)("textarea",{placeholder:"Enter the expected answer",value:h,onChange:e=>g(e.target.value),className:"w-full h-24 p-2 mb-4 border rounded-lg resize-none"}),(0,r.jsx)("textarea",{placeholder:"Enter comma-separated keywords (e.g., 'payment, method')",value:x,onChange:e=>b(e.target.value),className:"w-full h-24 p-2 mb-4 border rounded-lg resize-none"}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:p,onChange:e=>f(e.target.checked),className:"mr-2"}),(0,r.jsx)("label",{className:"text-sm text-gray-600",children:"I agree that Ritesh (admin) reserves the right to remove any inappropriate submissions."})]}),(0,r.jsx)("button",{onClick:I,className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Submit"})]})})]})}}},function(e){e.O(0,[6490,982,2888,9774,179],function(){return e(e.s=9712)}),_N_E=e.O()}]);